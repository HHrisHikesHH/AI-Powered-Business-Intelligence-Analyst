<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="741px" preserveAspectRatio="none" style="width:2241px;height:741px;background:#FFFFFF;" version="1.1" viewBox="0 0 2241 741" width="2241px" zoomAndPan="magnify"><defs/><g><!--MD5=[0dc75df124ceaac39fe3f8f1e60e6567]
cluster Frontend (React + Shadcn/UI)--><g id="cluster_Frontend (React + Shadcn/UI)"><rect fill="none" height="89" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="338" x="7" y="157.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="233" x="59.5" y="172.4951">Frontend (React + Shadcn/UI)</text></g><!--MD5=[5d854dd163168fab7e61f5687331b336]
cluster Backend (FastAPI)--><g id="cluster_Backend (FastAPI)"><rect fill="none" height="304" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="345" x="247" y="295.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="348.5" y="310.4951">Backend (FastAPI)</text></g><!--MD5=[2efa392147300ef6be1a142c87e01137]
cluster Agents & Services--><g id="cluster_Agents &amp; Services"><rect fill="none" height="101" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="1396" x="616" y="506.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147" x="1240.5" y="521.4951">Agents &amp; Services</text></g><!--MD5=[023fe2768d341cd525e8503fdfbee177]
cluster Data Layer--><g id="cluster_Data Layer"><rect fill="none" height="95" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="401" x="1834" y="640.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1992.5" y="655.4951">Data Layer</text></g><!--MD5=[31ba93973bc7c9d0a17e495fb2f93281]
cluster Observability--><g id="cluster_Observability"><rect fill="none" height="236.5" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="166" x="414" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="103" x="445.5" y="21.9951">Observability</text></g><g id="elem_Query UI"><ellipse cx="275.8472" cy="211.7215" fill="#F1F1F1" rx="53.3472" ry="14.7215" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="243.8472" y="215.469">Query UI</text></g><g id="elem_Admin Dashboard"><ellipse cx="104.8658" cy="211.2732" fill="#F1F1F1" rx="81.8658" ry="18.7732" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="42.3805" y="214.4463">Admin Dashboard</text></g><g id="elem_Query API"><ellipse cx="322.8197" cy="348.2671" fill="#F1F1F1" rx="59.3197" ry="14.7671" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="286.8197" y="352.0147">Query API</text></g><g id="elem_Orchestrator"><ellipse cx="507.8807" cy="443.4761" fill="#F1F1F1" rx="67.8807" ry="15.9761" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="461.3807" y="447.2237">Orchestrator</text></g><g id="elem_Admin API"><ellipse cx="343.813" cy="443.2771" fill="#F1F1F1" rx="60.813" ry="14.7771" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="306.813" y="447.0247">Admin API</text></g><g id="elem_Metrics Service"><ellipse cx="425.2198" cy="566.744" fill="#F1F1F1" rx="74.2198" ry="17.244" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="370.2198" y="570.4915">Metrics Service</text></g><g id="elem_Metrics Endpoint"><ellipse cx="496.9652" cy="348.693" fill="#F1F1F1" rx="78.9652" ry="18.193" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="436.9" y="352.1886">Metrics Endpoint</text></g><g id="elem_Query Understanding Agent"><ellipse cx="1098.8359" cy="566.4672" fill="#F1F1F1" rx="112.8359" ry="24.9672" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="1002.8359" y="569.3139">Query Understanding Agent</text></g><g id="elem_SQL Generation Agent"><ellipse cx="1342.0118" cy="566.4024" fill="#F1F1F1" rx="95.0118" ry="21.4024" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="1265.5118" y="569.249">SQL Generation Agent</text></g><g id="elem_SQL Validator"><ellipse cx="1540.964" cy="566.6928" fill="#F1F1F1" rx="68.964" ry="16.1928" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1492.964" y="570.4404">SQL Validator</text></g><g id="elem_Analysis Agent"><ellipse cx="1718.1868" cy="566.4374" fill="#F1F1F1" rx="72.6868" ry="16.9374" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1665.1868" y="570.1849">Analysis Agent</text></g><g id="elem_Visualization Agent"><ellipse cx="1910.8592" cy="566.3718" fill="#F1F1F1" rx="84.8592" ry="19.3718" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1845.8592" y="569.2185">Visualization Agent</text></g><g id="elem_Token Tracker"><ellipse cx="705.1868" cy="566.4374" fill="#F1F1F1" rx="72.6868" ry="16.9374" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="652.1868" y="570.1849">Token Tracker</text></g><g id="elem_Error Handler"><ellipse cx="881.964" cy="566.6928" fill="#F1F1F1" rx="68.964" ry="16.1928" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="833.964" y="570.4404">Error Handler</text></g><g id="elem_PostgreSQL + pgvector"><ellipse cx="2120.0673" cy="697.7135" fill="#F1F1F1" rx="99.0673" ry="22.2135" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="2039.0673" y="700.5601">PostgreSQL + pgvector</text></g><g id="elem_Redis Cache"><ellipse cx="1917.8807" cy="697.4761" fill="#F1F1F1" rx="67.8807" ry="15.9761" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="1871.3807" y="701.2237">Redis Cache</text></g><g id="elem_Prometheus"><ellipse cx="497.1678" cy="211.3336" fill="#F1F1F1" rx="67.1678" ry="15.8336" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="451.6678" y="215.0811">Prometheus</text></g><g id="elem_Grafana"><ellipse cx="497.1151" cy="56.6874" fill="#F1F1F1" rx="49.6151" ry="14.6874" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="467.6151" y="60.4349">Grafana</text></g><!--MD5=[fee662a292a0353a69bd162820bae93b]
entity User--><g id="elem_User"><ellipse cx="276" cy="27" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M276,35 L276,62 M263,43 L289,43 M276,62 L263,77 M276,62 L289,77 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="260" y="91.4951">User</text></g><!--MD5=[97ab183161fd5d1db7fba7485cf76add]
entity Admin--><g id="elem_Admin"><ellipse cx="105" cy="27" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M105,35 L105,62 M92,43 L118,43 M105,62 L92,77 M105,62 L118,77 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="83.5" y="91.4951">Admin</text></g><!--MD5=[672d100aab051e8b3b9cfbc9e34c5dfb]
link User to Query UI--><g id="link_User_Query UI"><path d="M287.76,94.54 C290.74,125.29 289.89,167.75 285.21,191.84 " fill="none" id="User-to-Query UI" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="284.08,196.98,289.915,189.0457,285.151,192.0961,282.1007,187.3321,284.08,196.98" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[672d100aab051e8b3b9cfbc9e34c5dfb]
link User to Query UI--><g id="link_User_Query UI"><path d="M264.9,94.54 C262.08,125.29 262.88,167.75 267.3,191.84 " fill="none" id="User-to-Query UI-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="268.37,196.98,270.4627,187.356,267.3565,192.0838,262.6287,188.9776,268.37,196.98" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[791e24b8dd78f1f125cc42c1583adf0f]
link Admin to Admin Dashboard--><g id="link_Admin_Admin Dashboard"><path d="M93.9,94.54 C91.25,123.44 91.8,162.68 95.54,187.29 " fill="none" id="Admin-to-Admin Dashboard" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="96.39,192.31,98.8157,182.7645,95.5472,187.3815,90.9301,184.1131,96.39,192.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[791e24b8dd78f1f125cc42c1583adf0f]
link Admin to Admin Dashboard--><g id="link_Admin_Admin Dashboard"><path d="M116.76,94.54 C119.56,123.44 118.98,162.68 115.01,187.29 " fill="none" id="Admin-to-Admin Dashboard-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="114.12,192.31,119.6488,184.1594,115.0044,187.3888,111.775,182.7444,114.12,192.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f8c1af7f04719f62e4c9f3cee2a0360a]
link Query API to Orchestrator--><g id="link_Query API_Orchestrator"><path d="M340.59,363.02 C370.31,380.21 429.01,409.78 468.7,427.6 " fill="none" id="Query API-to-Orchestrator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="473.44,429.71,466.8636,422.3785,468.8775,427.6647,463.5912,429.6785,473.44,429.71" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f8c1af7f04719f62e4c9f3cee2a0360a]
link Query API to Orchestrator--><g id="link_Query API_Orchestrator"><path d="M355.34,361.09 C392.55,377.24 451.5,406.63 484.6,425.33 " fill="none" id="Query API-to-Orchestrator-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="489.29,428.01,483.4463,420.0821,484.9444,425.537,479.4895,427.0351,489.29,428.01" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c9cf0dc6a7c43ab474e538cf202c8fc3]
link Admin API to Metrics Service--><g id="link_Admin API_Metrics Service"><path d="M345.01,458.86 C354.36,480.51 381.51,521.6 402.24,545.97 " fill="none" id="Admin API-to-Metrics Service" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="405.78,550.02,402.884,540.6065,402.4956,546.25,396.8521,545.8616,405.78,550.02" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c9cf0dc6a7c43ab474e538cf202c8fc3]
link Admin API to Metrics Service--><g id="link_Admin API_Metrics Service"><path d="M361.84,457.91 C381.47,478.91 409.33,519.71 421.51,544.59 " fill="none" id="Admin API-to-Metrics Service-1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="423.72,549.34,423.5489,539.4926,421.6103,544.8069,416.296,542.8682,423.72,549.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4d27ee52dc1b1f91daea7bdf29dc9282]
link Query UI to Query API--><g id="link_Query UI_Query API"><path d="M280.77,226.19 C289.2,250.42 306.78,300.91 316.38,328.5 " fill="none" id="Query UI-to-Query API" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="318.08,333.37,318.9048,323.5557,316.4391,328.6469,311.3479,326.1812,318.08,333.37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="299" y="275.5669">POST /api/v1/queries</text></g><!--MD5=[bf92dc66b81bfd23244e68e2a1b616e5]
link Orchestrator to Query Understanding Agent--><g id="link_Orchestrator_Query Understanding Agent"><path d="M575.96,444.91 C667.28,447.16 833.74,457.22 969,498.5 C1000.78,508.2 1034.04,525.49 1058.96,540.07 " fill="none" id="Orchestrator-to-Query Understanding Agent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1063.51,542.76,1057.7876,534.7441,1059.2025,540.2212,1053.7255,541.6361,1063.51,542.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a5bd3533b3bacf138349f4c7f808bfa6]
link Orchestrator to SQL Generation Agent--><g id="link_Orchestrator_SQL Generation Agent"><path d="M575.53,445.59 C730.82,448.74 1109.2,460.22 1230,498.5 C1260.17,508.06 1290.76,527.14 1312.33,542.5 " fill="none" id="Orchestrator-to-SQL Generation Agent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1316.52,545.52,1311.5637,537.0091,1312.4659,542.5936,1306.8814,543.4958,1316.52,545.52" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f290dd132a9b533b9631a8404646f292]
link Orchestrator to SQL Validator--><g id="link_Orchestrator_SQL Validator"><path d="M575.43,446.03 C778.17,450.93 1373.35,467.82 1455,498.5 C1482.11,508.69 1507.54,530.64 1523.61,546.65 " fill="none" id="Orchestrator-to-SQL Validator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1527.49,550.58,1524.0102,541.3664,1523.976,547.0231,1518.3192,546.9888,1527.49,550.58" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[975d9545168869b572f02aa8b085467a]
link Orchestrator to Analysis Agent--><g id="link_Orchestrator_Analysis Agent"><path d="M573.75,447.65 C726.41,454.98 1116.73,473.71 1443,489.5 C1525.22,493.48 1550.51,470.72 1628,498.5 C1655.79,508.46 1682.21,530.11 1699.15,546.11 " fill="none" id="Orchestrator-to-Analysis Agent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1702.83,549.64,1699.1091,540.521,1699.2236,546.1767,1693.5679,546.2912,1702.83,549.64" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a42df1f577479740a94e552d18aaf82d]
link Orchestrator to Visualization Agent--><g id="link_Orchestrator_Visualization Agent"><path d="M575.95,445.22 C826.53,448.16 1690.46,460.96 1808,498.5 C1837.47,507.91 1866.61,528.16 1886.33,543.95 " fill="none" id="Orchestrator-to-Visualization Agent" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1890.64,547.45,1886.1579,538.6801,1886.7524,544.3057,1881.1269,544.9002,1890.64,547.45" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[bdc875953cccaf5e837c166329bbb5e8]
link Orchestrator to Token Tracker--><g id="link_Orchestrator_Token Tracker"><path d="M530.98,458.62 C566.88,480.66 636.2,523.24 675.65,547.47 " fill="none" id="Orchestrator-to-Token Tracker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="680.31,550.34,674.7339,542.2217,676.0493,547.7235,670.5475,549.0389,680.31,550.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ec65a2b52cb4658acc45047a4e8b820c]
link Orchestrator to Error Handler--><g id="link_Orchestrator_Error Handler"><path d="M573.28,448.08 C633.2,453.36 723.28,466.38 795,498.5 C821.3,510.28 846.88,531.52 863.42,546.93 " fill="none" id="Orchestrator-to-Error Handler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="867.42,550.71,863.6255,541.6215,863.7857,547.276,858.1311,547.4363,867.42,550.71" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c111aa5c2c1efab59c692cc49a2f4fb9]
link Orchestrator to Metrics Service--><g id="link_Orchestrator_Metrics Service"><path d="M497.82,459.34 C483.07,480.84 455.69,520.75 439.03,545.04 " fill="none" id="Orchestrator-to-Metrics Service" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="436.05,549.39,444.4366,544.2262,438.876,545.2652,437.8369,539.7046,436.05,549.39" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7c5ab91b7b9f8f0ea1b42092b9c4c639]
link Orchestrator to PostgreSQL + pgvector--><g id="link_Orchestrator_PostgreSQL + pgvector"><path d="M576.24,444.08 C832.31,442.89 1735.71,442.23 2019,489.5 C2032.31,491.72 2038.23,489.19 2048,498.5 C2097,545.21 2112.78,627.88 2117.77,670.09 " fill="none" id="Orchestrator-to-PostgreSQL + pgvector" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2118.35,675.28,2121.3228,665.8905,2117.7931,670.3111,2113.3725,666.7815,2118.35,675.28" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1abc99d22c2e6f2d680d02ee2b01728b]
link Orchestrator to Redis Cache--><g id="link_Orchestrator_Redis Cache"><path d="M575.94,444.34 C862.7,443.99 1961.67,446.09 2012,498.5 C2048.02,536.01 2033.67,568.23 2012,615.5 C1999.04,643.77 1970.8,665.92 1948.64,679.86 " fill="none" id="Orchestrator-to-Redis Cache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1944.29,682.53,1954.0493,681.2052,1948.5444,679.9031,1949.8464,674.3982,1944.29,682.53" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[03d384e127d0e9cade25b4db8bef15cb]
link Admin Dashboard to Admin API--><g id="link_Admin Dashboard_Admin API"><path d="M93.61,230.69 C75.75,261.79 46.21,325.73 77,366.5 C102.35,400.07 217.27,423.2 287.82,434.51 " fill="none" id="Admin Dashboard-to-Admin API" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="292.83,435.31,284.5696,429.9467,287.892,434.5251,283.3136,437.8475,292.83,435.31" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="78" y="353.0669">GET /api/v1/admin/metrics</text></g><!--MD5=[730636983c4646e677969e3047355d9f]
link Metrics Service to Redis Cache--><g id="link_Metrics Service_Redis Cache"><path d="M467.4,580.55 C505.8,591.79 564.14,607.44 616,615.5 C1079.62,687.55 1645.51,696.03 1844.54,696.65 " fill="none" id="Metrics Service-to-Redis Cache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1849.75,696.66,1840.7615,692.6343,1844.75,696.6457,1840.7386,700.6343,1849.75,696.66" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[94b50521083c5e5b08d4a72647d2497d]
link Prometheus to Metrics Endpoint--><g id="link_Prometheus_Metrics Endpoint"><path d="M497,227.72 C497,251.51 497,297.63 497,325.18 " fill="none" id="Prometheus-to-Metrics Endpoint" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="497,330.43,501,321.43,497,325.43,493,321.43,497,330.43" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="498" y="275.5669">scrape /metrics</text></g><!--MD5=[5df3c136be817cae30ffd050deb0ee2a]
link Grafana to Prometheus--><g id="link_Grafana_Prometheus"><path d="M497,71.08 C497,98.04 497,158.46 497,190.18 " fill="none" id="Grafana-to-Prometheus" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="497,195.38,501,186.38,497,190.38,493,186.38,497,195.38" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="498" y="137.5669">visualise</text></g><!--MD5=[61319787c8e7a4ccbf70f3e3ddab6d7d]
@startuml
actor User
actor "Admin" as Admin

rectangle "Frontend (React + Shadcn/UI)" {
  User - -> (Query UI)
  Admin - -> (Admin Dashboard)
}

rectangle "Backend (FastAPI)" {
  (Query API) - -> (Orchestrator)
  (Admin API) - -> (Metrics Service)
  (Metrics Endpoint)
}

rectangle "Agents & Services" {
  (Query Understanding Agent)
  (SQL Generation Agent)
  (SQL Validator)
  (Analysis Agent)
  (Visualization Agent)
  (Token Tracker)
  (Error Handler)
  (Metrics Service)
}

rectangle "Data Layer" {
  (PostgreSQL + pgvector)
  (Redis Cache)
}

rectangle "Observability" {
  (Prometheus)
  (Grafana)
}

User -> (Query UI)
(Query UI) - -> (Query API): POST /api/v1/queries
(Query API) - -> (Orchestrator)
(Orchestrator) - -> (Query Understanding Agent)
(Orchestrator) - -> (SQL Generation Agent)
(Orchestrator) - -> (SQL Validator)
(Orchestrator) - -> (Analysis Agent)
(Orchestrator) - -> (Visualization Agent)
(Orchestrator) - -> (Token Tracker)
(Orchestrator) - -> (Error Handler)
(Orchestrator) - -> (Metrics Service)
(Orchestrator) - -> (PostgreSQL + pgvector)
(Orchestrator) - -> (Redis Cache)

Admin - -> (Admin Dashboard)
(Admin Dashboard) - -> (Admin API): GET /api/v1/admin/metrics
(Admin API) - -> (Metrics Service)
(Metrics Service) - -> (Redis Cache)

(Prometheus) - -> (Metrics Endpoint): scrape /metrics
(Grafana) - -> (Prometheus): visualise
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>